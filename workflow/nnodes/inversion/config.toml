[job]
system = [ "nnodes.job", "Frontier",]
name = "Inversion Set"
nnodes = 40
account = "GEO111"
walltime = 120.0
gap = 10.0
debug = false
node_splittable = true

[root]
task = ["cmt3d.ioi.nnodes.inversion", "main",]
inputfile = "/ccs/home/lsawade/gcmt/cmt3d/workflow/nnodes/input.yml"
# inputfile = "/ccs/home/lsawade/gcmt/cmt3d/workflow/nnodes/input_hard_damping.yml"
# inputfile = "/ccs/home/lsawade/gcmt/cmt3d/workflow/nnodes/input_fix_depth_10.yml"
# eventid = "B071402C,B071597B,B071600C,B071896B,B071995A,B072099A,B072100D,B072103F,B072200B,B072200C,B072203B,B072296C,B072300F,B072302D,B072396C,B072400D,B072402B,B072403C,B072496E,B072500A,B072501B,B072501F,B072502B,B072595A,B072603F,B072603H,B072603J,B072695A,B072699D,B072699E,B072700A,B072796B,B072797D,B072800D,B072800G,B072802D,B072803B"
# eventid="B070895A"
eventid="B010101D,B010200B,B010800D,B011195C,B011201B,B011601K,B011696A,B012301L,B012799A,B021298F,B021395B,B021401C,B022201B,B022399H,B022696E,B030100C,B030203D,B030804C,B030902B,B031095A,B031495E,B031499B,B032002A,B032399D,B032802E,B040100B,B040895J,B040895K,B041802G,B041895B,B042096B,B042195A,B042300E,B050103C,B050196D,B050403B,B051196F,B051197G,B051403C,B052195D,B052203A,B052301A,B052795D,B053195B,B060101C,B061396A,B061400D,B061900B,B070101D,B070301E,B070401E,B070797C,B070999D,B072301B,B072401B,B072699E,B072802D,B073095R,B080696A,B080697D,B081496B,B081695M,B081696A,B081795P,B082495C,B083195C,B091895C,B092097G,B092196F,B092203C,B092603H,B100201C,B100398D,B100400H,B100496A,B100597G,B100897B,B100897C,B101100B,B101501B,B101896J,B101902A,B101996G,B102101B,B102201B,B102595B,B102600B,B102900F,B103003C,B110195C,B110397B,B110400A,B110497C,B110503A,B110600A,B110898E,B110900B,B110902G,B111203C,B111396C,B111402C,B111403H,B111597C,B111800G,B111998E,B112899A,B120199F,B120296C,B121099B,B121195E,B121500G,B121698F,B121800C,B121996A,B122298E,B122595D,B122603G,B122803H,B122901A,B200601231316A,B200603021524A,B200605060229A,B200607161424A,B200609290043A,B200611131156A,B200612100043A,B200701280812A,B200707011021A,B200707261352A,B200802070925A,B200811031936A,B200811170600A,B200812091851A,B200812182057A,B200901071625A,B200901240901A,B200906071246A,B200906080433A,B201105101526A,B201105281835A,B201105281837A,B201107190715A,B201210251840A,B201210300712B,B201305241456A,B201401271642A,B201403260423A,B201404180746A,B201412310247A,B201501171841A,B201503081552A,B201503172016A,B201505061208A,B201509011608A,B201511261351A,B201512061709A,B201601112219A,B201601260346A,B201604201133A,B201604250802A,B201702080006A,B201709202359A,B201712161122A,B201804242157A,B201808200838A,B201809060513A,B201809070510A,B201809090006A,B201809102024A,B201809181238A,B201810040416A,B201812051605A,B201902210634A,B201902270200A,B201906140754A,B201906180514A,B201911271000A,C010304C,C010304H,C030704D,C031501G,C032900A,C033096C,C042404A,C060700C,C061004J,C061004L,C062804D,C072097A,C072597B,C081795A,C082804D,C082804E,C090304D,C090504F,C090604E,C091804B,C092104D,C093003H,C100904G,C102304J,C102304K,C102304L,C111204H,C112304A,C121304B,C122404C,C122604B,C122604D,C122604E,C122604F,C122604G,C122604H,C122604L,C122604M,C122704N,C200503231359A,C200503290516A,C200505031911A,C200506141149A,C200509011122A,C200509062136A,C200509091955A,C200509291851A,C200510081208A,C200510081225A,C200511172159A,C200512010308A,C200512201834A,C200601280153A,C200602230123A,C200604210432A,C200604302012A,C200604302125A,C200604302132A,C200605010225B,C200605162055A,C200605280336A,C200607170913A,C200607171107A,C200608112054A,C200609011204A,C200610121805A,C200611151140A,C200611152122A,C200611160018A,C200612261519A,C200704012111A,C200704020249A,C200704020533A,C200704021235A,C200704022331A,C200704030028B,C200705010015A,C200708020623A,C200708021511A,C200708160516A,C200708170618A,C200709020234A,C200709140601A,C200709280150A,C200711102319A,C200711151718A,C200711160842A,C200712191451A,C200712262340A,C200802200808A,C200802241446A,C200804091447A,C200804160811A,C200805121111A,C200805251918A,C200806061342A,C200809110020A,C200810300155A,C200811070735A,C200811080750A,C200811221722A,C200811271731A,C200901040544A,C200904071518A,C200904080626A,C200904151747A,C200907280843A,C200908181759A,C200909301903A,C200910081011A,C200911091602A,C200911280604A,C200912140641A,C201001040417A,C201001130132A,C201001130136A,C201002271900A,C201002271954A,C201002272302A,C201002280108A,C201003020251A,C201003051147A,C201003112011A,C201003151108A,C201005051629A,C201007141505A,C201007181304A,C201008042348A,C201008140108A,C201009300026A,C201010121021A,C201010161327A,C201011261736A,C201011270244A,C201012130114A,C201012251942A,C201101050646A,C201102211226A,C201103092122A,C201103111902A,C201103120119A,C201103120134A,C201103120311A,C201103120452A,C201103241554A,C201104071311A,C201105101024A,C201106240633A,C201107230628A,C201108130733A,C201108210023A,C201108311217A,C201109122244A,C201109162136A,C201110282346A,C201112110530A,C201112110954A,C201112141107A,C201201172323A,C201202060420A,C201203220021A,C201204112356A,C201205052023A,C201205200719A,C201207110231A,C201207201403A,C201208020938A,C201210281903A,C201211011412A,C201211072342A,C201211130455A,C201302021831A,C201302060635A,C201302060653A,C201302061124A,C201302081807A,C201302092309A,C201306131723A,C201309241720A,C201309281113A,C201310242032A,C201310252127A,C201310252151A,C201311021905A,C201401040011A,C201402121143A,C201402181012A,C201403221329A,C201403231819A,C201404012358A,C201404030526A,C201404030930A,C201404181844A,C201404181856A,C201404181905A,C201404192054A,C201405121851A,C201405241149A,C201406231921A,C201411131221A,C201411150307A,C201412070330A,C201412170610A,C201502170214A,C201503311215A,C201504251641A,C201505050816A,C201505290840A,C201507070535A,C201507270740A,C201508070128A,C201509071406A,C201509122032A,C201509171214A,C201509211956A,C201511071053A,C201511081914A,C201511291856A,C201603030010A,C201603211448A,C201604170713A,C201604170731A,C201604170923A,C201604240838A,C201605210606A,C201606232105A,C201607101344A,C201607250900A,C201607301319A,C201608120329A,C201608241348A,C201609011918A,C201609012004A,C201609012006A,C201609241104A,C201611131928A,C201611220019A,C201612092138A,C201612171127A,C201612172221A,C201701040106A,C201701101001A,C201701170908A,C201702242346A,C201703141236A,C201704281558A,C201705110109A,C201705291457A,C201706022348A,C201706140638A,C201707271208A,C201708022003A,C201708311746A,C201709081857A,C201709102140A,C201709202217A,C201711150024A,C201711200009A,C201802061837A,C201802261517A,C201803041433A,C201803061413A,C201807030314A,C201807030323A,C201808212232A,C201809052111A,C201809070239A,C201809150805A,C201809151624A,C201810102059A,C201810110216A,C201810160028A,C201810160138A,C201810160442A,C201901101700A,C201902222115A,C201903061546A,C201903062019A,C201905230845A,C201907040430A,C201908012001A,C201910142223A,C201910290844A,C201911031323A,C201911142019A,C201911142039A,C201911142137A,C201911142234A,C201911142317A,C201912241903A,S020504C,S200812160520A,S201001122200A,S201002270801A,S201002271545A,S201308160245A,S201505301718A,S201509162318A,S201509241556A,S201607251949A,S201807282306A,S201911141845A"
# start_index = 0
# end_index = 10
# max_conc = 10
subset_max_conc = 30 # max number of subsets to get simultaneously
inversion_max_conc = 100 # max number of subsets to get simultaneously
#start_index = 9250
#end_index = 9750
redo = true
redo_keep_subset = false
dbname = "/lustre/orion/geo111/scratch/lsawade/DB/GLAD-M25/128_single"
db_is_local = true
# Multiprocesses: Number of cores to use for the processing
backend = 'mpi' #['multiprocessing', 'mpi']
# Submission parameters
forward_nproc = 56
forward_slurm_flags = "--mem=0 --exclusive -N1"
subset_nproc = 4
subset_slurm_flags = "-N1 --exclusive --mem=0"
process_nproc = 26
window_nproc = 56
save_interval = 30
retry_delay = 10
default_retry = 1
eventchecksleep = 60